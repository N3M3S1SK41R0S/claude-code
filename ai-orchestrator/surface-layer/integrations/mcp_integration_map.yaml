# =============================================================================
# NEMESIS SURFACE LAYER — MCP & N8N Integration Map
# Matrice effort/valeur pour prioriser les intégrations outils externes
# =============================================================================

# Légende effort: 1=trivial, 2=simple, 3=modéré, 4=complexe, 5=majeur
# Légende valeur: 1=faible, 2=utile, 3=important, 4=critique, 5=essentiel

integrations:
  # =========================================================================
  # PRIORITÉ 1 — Quick Wins (effort faible, valeur haute)
  # =========================================================================
  slack_mcp:
    tool: "Slack"
    integration_mode: mcp_native
    mcp_tools:
      - mcp__Slack__slack_send_message
      - mcp__Slack__slack_read_channel
      - mcp__Slack__slack_read_thread
      - mcp__Slack__slack_search_public
      - mcp__Slack__slack_search_channels
      - mcp__Slack__slack_search_users
    effort: 1
    valeur: 5
    status: available
    use_cases:
      - "Poster les outputs agents dans les channels projet"
      - "Lire les messages pour contexte conversationnel"
      - "Rechercher les décisions passées dans l'historique"
    config_notes: "MCP Slack déjà disponible. Aucune config supplémentaire."

  notion_mcp:
    tool: "Notion"
    integration_mode: mcp_native
    mcp_tools:
      - mcp__Notion__notion-search
      - mcp__Notion__notion-fetch
      - mcp__Notion__notion-create-pages
      - mcp__Notion__notion-update-page
      - mcp__Notion__notion-query-database-view
    effort: 1
    valeur: 4
    status: available
    use_cases:
      - "Créer des pages de suivi projet automatiques"
      - "Synchroniser les décisions dans une base Notion"
      - "Requêter les bases de données clients CGP"
    config_notes: "MCP Notion disponible. Connexion OAuth requise."

  canva_mcp:
    tool: "Canva"
    integration_mode: mcp_native
    mcp_tools:
      - mcp__Canva__search-designs
      - mcp__Canva__get-design
      - mcp__Canva__export-design
      - mcp__Canva__generate-design
      - mcp__Canva__create-design-from-candidate
    effort: 2
    valeur: 3
    status: available
    use_cases:
      - "Générer des présentations patrimoine client"
      - "Créer des visuels marketing CGP automatisés"
      - "Exporter les designs en PDF pour livraison client"
    config_notes: "MCP Canva disponible. Nécessite compte Canva Pro."

  gmail_mcp:
    tool: "Gmail"
    integration_mode: mcp_native
    mcp_tools:
      - mcp__Gmail__gmail_search_messages
      - mcp__Gmail__gmail_read_message
      - mcp__Gmail__gmail_create_draft
    effort: 1
    valeur: 3
    status: available
    use_cases:
      - "Rechercher les emails clients par sujet/date"
      - "Créer des brouillons de réponse client via @KYRON"
      - "Extraire les pièces jointes pour analyse"
    config_notes: "MCP Gmail disponible. OAuth Google requis. RGPD: ne pas transférer de données client vers d'autres APIs."
    rgpd_warning: "Les emails clients sont des données personnelles. Lecture seule recommandée."

  google_calendar_mcp:
    tool: "Google Calendar"
    integration_mode: mcp_native
    mcp_tools:
      - mcp__Google_Calendar__gcal_list_events
      - mcp__Google_Calendar__gcal_create_event
      - mcp__Google_Calendar__gcal_find_my_free_time
    effort: 1
    valeur: 3
    status: available
    use_cases:
      - "Planifier les RDV clients automatiquement"
      - "Trouver les créneaux disponibles pour meetings"
      - "Synchro des deadlines projet avec le calendrier"

  # =========================================================================
  # PRIORITÉ 2 — Valeur moyenne, effort modéré
  # =========================================================================
  figma_mcp:
    tool: "Figma"
    integration_mode: mcp_native
    mcp_tools:
      - mcp__Figma__get_design_context
      - mcp__Figma__get_screenshot
      - mcp__Figma__get_metadata
    effort: 2
    valeur: 2
    status: available
    use_cases:
      - "Transformer des maquettes Figma en code"
      - "Extraire des specs de design pour les présentations"
    config_notes: "Pertinent si UI custom est développée pour NEMESIS dashboard."

  huggingface_mcp:
    tool: "Hugging Face"
    integration_mode: mcp_native
    mcp_tools:
      - mcp__Hugging_Face__paper_search
      - mcp__Hugging_Face__space_search
      - mcp__Hugging_Face__hub_repo_details
      - mcp__Hugging_Face__use_space
    effort: 2
    valeur: 3
    status: available
    use_cases:
      - "Rechercher des modèles ML pour enrichir NEMESIS"
      - "Utiliser des Spaces pour des tâches spécialisées"
      - "Veille sur les derniers papers AI (via @ZAPPA)"

  cloudflare_mcp:
    tool: "Cloudflare"
    integration_mode: mcp_native
    mcp_tools:
      - mcp__Cloudflare_Developer_Platform__workers_list
      - mcp__Cloudflare_Developer_Platform__d1_database_query
      - mcp__Cloudflare_Developer_Platform__kv_namespace_get
      - mcp__Cloudflare_Developer_Platform__r2_bucket_get
    effort: 3
    valeur: 3
    status: available
    use_cases:
      - "Déployer des Workers edge pour le routing Chrome"
      - "Utiliser D1 pour stocker les métriques agents"
      - "KV store pour cache de session"
    config_notes: "Utile si déploiement cloud est envisagé. Pas prioritaire pour MVP local."

  # =========================================================================
  # PRIORITÉ 3 — Via N8N (pas de MCP natif)
  # =========================================================================
  n8n_hub:
    tool: "N8N"
    integration_mode: self_hosted
    effort: 2
    valeur: 5
    status: deployed
    base_url: "http://localhost:5678"
    capabilities:
      - webhook_receiver
      - workflow_automation
      - cron_scheduling
      - api_aggregator
    use_cases:
      - "Hub central de tous les webhooks agent"
      - "Orchestration séquentielle des tâches"
      - "Cron jobs pour veille automatique"
      - "Agrégation des réponses multi-agents"
    workflows_provided:
      - "slack_project_sync.json"
      - "chrome_entry_router.json"
      - "cascade_escalation.json"

  google_drive_n8n:
    tool: "Google Drive"
    integration_mode: n8n_node
    n8n_node_type: "n8n-nodes-base.googleDrive"
    effort: 2
    valeur: 4
    status: ready
    use_cases:
      - "Stocker les rapports générés par @KYRON"
      - "Lire les documents clients uploadés"
      - "Synchroniser les livrables projet"
    config_notes: "Node N8N Google Drive natif. OAuth Google requis."
    rgpd_warning: "Documents clients = données personnelles. Chiffrement recommandé."

  perplexity_n8n:
    tool: "Perplexity AI"
    integration_mode: n8n_webhook
    effort: 2
    valeur: 4
    status: ready
    api_endpoint: "https://api.perplexity.ai/chat/completions"
    use_cases:
      - "Veille marché déclenchée par @ZAPPA depuis Slack"
      - "Fact-checking automatique avant publication"
      - "Recherche réglementaire CGP en temps réel"
    config_notes: "API REST simple. Intégrer via HTTP Request node dans N8N."

  qdrant_n8n:
    tool: "Qdrant"
    integration_mode: api_direct
    effort: 3
    valeur: 4
    status: deployed
    host: "localhost"
    port: 6333
    use_cases:
      - "Mémoire vectorielle long-terme pour contexte projet"
      - "Recherche sémantique dans l'historique des décisions"
      - "RAG sur les documents clients (avec consentement)"
    config_notes: "Déjà dans le stack NEMESIS. Créer des collections par projet."

  zapier_fallback:
    tool: "Zapier"
    integration_mode: n8n_webhook
    effort: 1
    valeur: 2
    status: available
    mcp_tools:
      - mcp__Zapier__get_configuration_url
    use_cases:
      - "Fallback pour automatisations légères"
      - "Intégrations one-off non couvertes par N8N"
    config_notes: "Utiliser uniquement si N8N ne couvre pas le besoin."

  # =========================================================================
  # EXCLUES — Pas d'intégration recommandée
  # =========================================================================
  midjourney:
    tool: "Midjourney"
    integration_mode: excluded
    effort: 5
    valeur: 2
    reason: "Pas d'API publique. Utiliser via Discord manuellement ou Canva comme substitut."

  gen3:
    tool: "Gen-3 (Runway)"
    integration_mode: excluded
    effort: 4
    valeur: 1
    reason: "Vidéo IA non prioritaire pour CGP. Coût élevé. Intégrer ultérieurement si besoin."

# =============================================================================
# MATRICE DE PRIORISATION
# =============================================================================
priority_matrix:
  # Format: [outil, effort, valeur, score=valeur/effort, recommandation]
  rankings:
    - {tool: slack_mcp, effort: 1, valeur: 5, score: 5.0, action: "DEPLOYER IMMÉDIATEMENT"}
    - {tool: n8n_hub, effort: 2, valeur: 5, score: 2.5, action: "DEPLOYER IMMÉDIATEMENT"}
    - {tool: notion_mcp, effort: 1, valeur: 4, score: 4.0, action: "DEPLOYER IMMÉDIATEMENT"}
    - {tool: google_drive_n8n, effort: 2, valeur: 4, score: 2.0, action: "DÉPLOYER SEMAINE 1"}
    - {tool: perplexity_n8n, effort: 2, valeur: 4, score: 2.0, action: "DÉPLOYER SEMAINE 1"}
    - {tool: qdrant_n8n, effort: 3, valeur: 4, score: 1.3, action: "DÉPLOYER SEMAINE 1"}
    - {tool: gmail_mcp, effort: 1, valeur: 3, score: 3.0, action: "DÉPLOYER SEMAINE 2"}
    - {tool: google_calendar_mcp, effort: 1, valeur: 3, score: 3.0, action: "DÉPLOYER SEMAINE 2"}
    - {tool: canva_mcp, effort: 2, valeur: 3, score: 1.5, action: "DÉPLOYER SEMAINE 2"}
    - {tool: huggingface_mcp, effort: 2, valeur: 3, score: 1.5, action: "DÉPLOYER SEMAINE 3"}
    - {tool: cloudflare_mcp, effort: 3, valeur: 3, score: 1.0, action: "OPTIONNEL"}
    - {tool: figma_mcp, effort: 2, valeur: 2, score: 1.0, action: "OPTIONNEL"}
    - {tool: zapier_fallback, effort: 1, valeur: 2, score: 2.0, action: "FALLBACK UNIQUEMENT"}
